# 記事のslug提案コマンド

指定されたMarkdown記事を読んで、適切なファイル名（slug）を提案します。

## 実行手順

1. **記事ファイルを読み込む**: ユーザーがファイルパスを指定していない場合は尋ねる
2. **内容を分析する**:
   - frontmatterから`title:`と`topics:`を抽出
   - 記事本文を読んで主要なトピックとテーマを理解
   - 記事の主要カテゴリを判断
3. **既存のslugパターンを確認**:
   - `articles/`ディレクトリ内の既存ファイルを確認
   - 同じカテゴリの記事のslugパターンを把握
   - 既に使用されているslugとの重複を避ける
4. **slugのルール**:
   - **必須**: カテゴリを示すプレフィックスで始める（ソート時に同カテゴリが並ぶため）
   - 小文字のみ使用
   - 単語は `-` で区切る
   - 簡潔で内容が分かりやすい
   - 30文字程度を目安に（長すぎない）
5. **プレフィックスの例**:
   - CSS関連: `css-`
   - HTML関連: `html-`
   - JavaScript関連: `js-`
   - TypeScript関連: `ts-`
   - React関連: `react-`
   - ESLint関連: `eslint-`
   - GitHub Actions関連: `github-actions-`
   - Storybook関連: `storybook-`
   - AI関連: `ai-`
   - アクセシビリティ関連: `accessibility-`
   - テスト関連: `test-` または `testing-`
   - その他ツール: ツール名をプレフィックスに（例: `vitest-`, `tailwind-`）
   - カテゴリが明確でない場合: プレフィックスなしも可
6. **slug提案の生成**:
   - 記事内容に合ったslugを6個以上生成（内部的に準備）
   - タイトルの直訳だけでなく、内容の本質を捉えたものも含める
   - 各slugについて簡単な説明を付ける
7. **提案リストを表示する**:
   - **まず、すべてのslug提案（6個以上）をテキストで一覧表示する**
   - 各slugについて、なぜ適切かの理由を記載
   - 「以下から選んでください」と案内する
8. **ユーザーに選択させる**:
   - **AskUserQuestionツールで最初の3つを提示**
   - 4つ目の選択肢として「次の選択肢を表示」を追加
   - ユーザーが「次の選択肢を表示」を選んだ場合、次の3つ+「次の選択肢を表示」を提示
   - これを繰り返し、すべての候補を見せ終わったら最初に戻る
9. **ファイルをリネームする**:
   - ユーザーが選択した後、記事ファイルをリネーム
   - `articles/{元のファイル名}.md` → `articles/{新しいslug}.md`
   - リネーム完了をユーザーに報告

## 提案時の出力例

**ステップ1: まずすべての提案を一覧表示**

```
記事「TypeScriptの型安全なフォーム実装」を分析しました。
以下、slug の提案です：

1. ts-type-safe-form - 型安全なフォーム実装（最も直接的）
2. ts-form-validation - フォームバリデーションに焦点
3. ts-form-type-safety - 型安全性を強調
4. ts-safe-form-implementation - 安全な実装を強調
5. typescript-form-best-practices - ベストプラクティス的な視点
6. ts-zod-form-validation - 使用技術（Zod等）を含める場合
7. ts-forms-with-types - シンプルな表現
8. ts-typed-forms - より簡潔に

以下から選んでください。
```

**ステップ2: AskUserQuestionで選択肢を提示（最初のページ）**

```
選択肢1: ts-type-safe-form - 型安全なフォーム実装（最も直接的）
選択肢2: ts-form-validation - フォームバリデーションに焦点
選択肢3: ts-form-type-safety - 型安全性を強調
選択肢4: 次の選択肢を表示
```

**ステップ3: ユーザーが「次の選択肢を表示」を選んだ場合（次のページ）**

```
選択肢1: ts-safe-form-implementation - 安全な実装を強調
選択肢2: typescript-form-best-practices - ベストプラクティス的な視点
選択肢3: ts-zod-form-validation - 使用技術（Zod等）を含める場合
選択肢4: 次の選択肢を表示
```

## slug作成のヒント

- **タイトルから直訳**: 「CSSのclamp()関数でレスポンシブ対応」→ `css-clamp-responsive`
- **技術的なキーワードを含める**: `:is()と:where()`の記事 → `css-is-where-tips`
- **動詞を使う**: 「Jestからvitestに移行した」→ `jest-to-vitest`
- **問題解決系**: 「Cursor Agent Modeがハングする」→ `cursor-agent-mode-hangs`
- **vs形式**: 「dlとulとtableの使い分け」→ `html-dl-vs-ul-vs-table`

## 重要な注意点

- **プレフィックスは必須**: ソート時に同カテゴリがまとまるよう、必ずカテゴリプレフィックスを付ける
- **既存ファイルを確認**: 重複や類似slugを避けるため、必ず既存ファイルを確認
- **簡潔さと明確さのバランス**: 短すぎると内容不明、長すぎると扱いにくい
- **SEO考慮**: 検索されそうなキーワードを含める
- **記事の焦点を反映**: タイトルだけでなく、記事の実際の内容・焦点を反映させる
