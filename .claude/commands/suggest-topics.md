# 記事のtopics提案コマンド

指定されたMarkdown記事を読んで、適切なtopics（トピックタグ）を提案します。

## 実行手順

1. **記事ファイルを読み込む**: ユーザーがファイルパスを指定していない場合は尋ねる
2. **内容を分析する**:
   - frontmatterから`title:`と現在の`topics:`を抽出
   - 記事本文を読んで主要な技術・トピックを理解
   - 記事で扱っている技術スタック、ライブラリ、概念を特定
3. **人気トピックを参照**:
   - **https://zenn.dev/topics にアクセスして、よく使われているトピックを確認する**
   - WebFetchツールで取得し、記事内容に関連しそうなトピックをピックアップ
   - このリポジトリでよく使われるtopics（参考）:
     - css (16件), javascript (10件), html (8件), typescript (6件)
     - react (5件), testing (4件), アクセシビリティ (4件)
     - storybook, nextjs, githubactions, eslint, など
   - 新たに検討すべき人気トピック:
     - `llm`, `生成ai`, `frontend`, `test`, `security`, など
4. **topicsのルール**:
   - **最大5個まで**設定可能
   - **実在するトピックのみ**提案する（必須）
   - 小文字推奨（例: `javascript` not `JavaScript`）
   - 記事内容に適合し、かつ**よく使われているトピック**を優先
   - 具体的な技術名 > 抽象的な概念
5. **トピック候補の選定**:
   - 記事内容から5〜8個のトピック候補を選定
   - 各候補について理由を明記
6. **トピックの検証**:
   - **必ず https://zenn.dev/topics/{topic} にアクセスして存在確認する**
   - 404が返ってきたら、そのトピックは存在しないので提案してはいけない
   - 記事件数が表示されたら、その数も参考情報として提示
   - WebFetchツールを使って複数のトピック候補を並行チェック
7. **提案リストを表示する**:
   - **すべてのトピック候補（5〜8個）をテキストで一覧表示する**
   - 各トピックについて、選定理由と記事件数を記載
   - 現在設定されているtopicsも表示
8. **ユーザーに選択させる（チェックボックス形式）**:
   - **AskUserQuestionの`multiSelect: true`を使用**
   - すべてのトピック候補をチェックボックス形式で提示
   - ユーザーが複数選択できるようにする（最大5個）
   - 「記事に設定したいトピックをすべて選択してください（最大5個）」と案内
9. **記事を更新する**:
   - ユーザーが選択したトピックで、frontmatterの`topics:`フィールドを更新
   - 更新完了をユーザーに報告

## 提案時の出力例

**ステップ1: トピック候補の検証**

```
記事「TypeScriptの型安全なフォーム実装」を分析中...

現在のtopics: ["typescript", "react"]

トピック候補を検証しています:
- typescript: ✅ 存在 (12,345件) - TypeScriptを主題としている
- react: ✅ 存在 (8,901件) - Reactでの実装例を紹介
- frontend: ✅ 存在 (2,340件) - フロントエンド開発の記事
- zod: ✅ 存在 (156件) - Zodライブラリを使用
- test: ✅ 存在 (890件) - テストについても言及
- validation: ❌ 存在しない（404）
```

**ステップ2: トピック候補の提案**

```
以下のトピックを提案します。記事に設定したいものをすべて選択してください（最大5個）:

1. typescript (12,345件) - TypeScriptを主題としている
2. react (8,901件) - Reactでの実装例を紹介
3. frontend (2,340件) - フロントエンド開発全般に関連
4. zod (156件) - Zodライブラリを使用した型安全性
5. test (890件) - テストについても言及している
```

**ステップ3: AskUserQuestionでチェックボックス形式で提示**

- `multiSelect: true` を使用
- ユーザーが複数選択可能
- 選択されたトピックでfrontmatterを更新

## トピック選定のヒント

### よく使われる技術トピック

**言語・フレームワーク:**
- `javascript`, `typescript`, `css`, `html`
- `react`, `nextjs`, `vue`, `svelte`, `astro`
- `nodejs`, `deno`, `bun`

**ツール・ライブラリ:**
- `eslint`, `prettier`, `vite`, `webpack`
- `storybook`, `vitest`, `jest`, `playwright`
- `tailwindcss`, `sass`, `scss`
- `githubactions`, `docker`

**概念・分野:**
- `frontend`, `test`, `testing`
- `a11y`, `アクセシビリティ`, `accessibility`
- `design`, `ui`, `ux`
- `seo`, `performance`, `security`
- `ai`, `llm`, `生成ai`, `openai`, `chatgpt`

### トピック選定の優先順位

1. **記事の主要技術** (必須): 記事で実際に扱っている技術
2. **関連フレームワーク/ライブラリ**: 使用しているツール
3. **技術分野**: テスト、アクセシビリティなど
4. **より具体的なもの優先**: `reacthookform` > `form`

### 避けるべきトピック

- 存在しないトピック（404になるもの）
- 抽象的すぎるもの（`技術記事`, `プログラミング`）
- 記事内容と関連が薄いもの
- 極端にマイナーなもの（記事件数が10件未満など）

## 重要な注意点

- **トピックの存在確認は必須**: WebFetchで https://zenn.dev/topics/{topic} を必ずチェック
- **並行チェック推奨**: 複数のトピック候補を並行してチェックして効率化
- **記事件数を参考に**: 人気のトピック（記事件数が多い）を優先
- **最大5個まで**: 多すぎても少なすぎても良くない。3〜5個が理想
- **具体的な技術名を優先**: ユーザーが検索しやすい具体的な名前を選ぶ
- **小文字推奨**: `javascript` (○) vs `JavaScript` (△)
- **記事の焦点を反映**: タイトルと内容の両方から主要トピックを判断
